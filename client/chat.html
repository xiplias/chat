<head>
  <title>chat</title>
</head>

<body>
  <nav id="sidebar">
    {{> sidebar}}
  </nav>
  <article id="chat">
    {{> chat}}
  </article>
  {{> modal}}
</body>

<template name="chat">
  <div id="room_top">{{room.name}}</div>
  <div id="messages">
    {{#each messages}}  
     <table class="message_container">  
        <tr>
          <td class="author">{{author.profile.name}}</td>
          <td class="message">{{message}}</td>
        </tr>
      </table>
    {{/each}}
  </div>
  <div id="message_form">
    <textarea id="input_message"></textarea>
    <input type="submit" class="btn" id="submit_message" />
  </div>
  <div id="room_info">
  </div>
</template>

<template name="sidebar">
  <br>
  <div id="logo">
    <i class="icon-cloud"></i>
  </div>
  <h2>Rooms</h2>
  <ul>
    {{#each rooms}}
      <li>
        <a href="/rooms/{{_id}}">{{name}}</a>
      </li>
    {{/each}}
    <li>
      <a href="/rooms/new">New Room</a>
    </li>
  </ul>

  <h2>Users</h2>
  <ul>
    {{#each users}}
    <li>
      <a href="/users/{{profile.name}}">{{profile.name}}</a>
    </li>
    {{/each}}
  </ul>

  {{loginButtons}}
  <br>
</template>

<template name="modal">
  {{#if need_modal "new_room"}}
    {{> new_room}}
  {{/if}}
</template>

<template name="new_room">
  <div class="modal">
    <div class="modal-header">
      <button type="button" class="close close_modal" data-dismiss="modal" aria-hidden="true">&times;</button>
      <h3>New Room</h3>
    </div>
    <div class="modal-body">
      <label for="input_room_name">Room name</label>
      <input id="input_room_name" type="text" />
    </div>
    <div class="modal-footer">
      <a href="#" class="btn close_modal">Close</a>
      <a href="#" class="btn btn-primary" id="submit_new_room">Create room</a>
    </div>
  </div>
</template>
